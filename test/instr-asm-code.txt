
two macros are 58+55 instructions, so 1% overhead, code needs to be ~10K instructions

Assembly code for begin heartbeat macro: (58 instructions)
  402ba7:       89 45 ec                mov    %eax,-0x14(%rbp)
  402baa:       48 8b 05 67 56 00 00    mov    0x5667(%rip),%rax        # 408218 <_ekgThreadId>
  402bb1:       ff d0                   callq  *%rax
  402bb3:       83 c0 01                add    $0x1,%eax
  402bb6:       89 45 dc                mov    %eax,-0x24(%rbp)
  402bb9:       8b 45 dc                mov    -0x24(%rbp),%eax
  402bbc:       89 c2                   mov    %eax,%edx
  402bbe:       48 69 d2 dd 47 70 1f    imul   $0x1f7047dd,%rdx,%rdx
  402bc5:       48 c1 ea 20             shr    $0x20,%rdx
  402bc9:       89 c1                   mov    %eax,%ecx
  402bcb:       29 d1                   sub    %edx,%ecx
  402bcd:       d1 e9                   shr    %ecx
  402bcf:       01 ca                   add    %ecx,%edx
  402bd1:       c1 ea 05                shr    $0x5,%edx
  402bd4:       6b d2 39                imul   $0x39,%edx,%edx
  402bd7:       29 d0                   sub    %edx,%eax
  402bd9:       89 45 d8                mov    %eax,-0x28(%rbp)
  402bdc:       48 8b 05 2d 56 00 00    mov    0x562d(%rip),%rax        # 408210 <_ekgActualThreadID>
  402be3:       8b 55 d8                mov    -0x28(%rbp),%edx
  402be6:       48 c1 e2 02             shl    $0x2,%rdx
  402bea:       48 01 d0                add    %rdx,%rax
  402bed:       8b 00                   mov    (%rax),%eax
  402bef:       85 c0                   test   %eax,%eax
  402bf1:       74 71                   je     402c64 <main._omp_fn.1+0x12b>
  402bf3:       e9 3c 02 00 00          jmpq   402e34 <main._omp_fn.1+0x2fb>
  402bf8:       8b 55 d8                mov    -0x28(%rbp),%edx
  402bfb:       89 d0                   mov    %edx,%eax
  402bfd:       c1 e0 02                shl    $0x2,%eax
  402c00:       01 d0                   add    %edx,%eax
  402c02:       c1 e0 02                shl    $0x2,%eax
  402c05:       83 c0 01                add    $0x1,%eax
  402c08:       89 45 d8                mov    %eax,-0x28(%rbp)
  402c0b:       48 8b 05 f6 55 00 00    mov    0x55f6(%rip),%rax        # 408208 <_ekgHBCount>
  402c12:       8b 55 d8                mov    -0x28(%rbp),%edx
  402c15:       48 c1 e2 02             shl    $0x2,%rdx
  402c19:       48 01 d0                add    %rdx,%rax
  402c1c:       8b 10                   mov    (%rax),%edx
  402c1e:       8d 4a 01                lea    0x1(%rdx),%ecx
  402c21:       89 08                   mov    %ecx,(%rax)
  402c23:       89 d0                   mov    %edx,%eax
  402c25:       48 69 c0 d3 4d 62 10    imul   $0x10624dd3,%rax,%rax
  402c2c:       48 c1 e8 20             shr    $0x20,%rax
  402c30:       c1 e8 06                shr    $0x6,%eax
  402c33:       69 c8 e8 03 00 00       imul   $0x3e8,%eax,%ecx
  402c39:       89 d0                   mov    %edx,%eax
  402c3b:       29 c8                   sub    %ecx,%eax
  402c3d:       85 c0                   test   %eax,%eax
  402c3f:       75 3e                   jne    402c7f <main._omp_fn.1+0x146>
  402c41:       bf 02 00 00 00          mov    $0x2,%edi
  402c46:       e8 66 1c 00 00          callq  4048b1 <ekgBeginHeartbeat>
  402c4b:       48 8b 05 ae 55 00 00    mov    0x55ae(%rip),%rax        # 408200 <_ekgHBEndFlag>
  402c52:       8b 55 d8                mov    -0x28(%rbp),%edx
  402c55:       48 c1 e2 02             shl    $0x2,%rdx
  402c59:       48 01 d0                add    %rdx,%rax
  402c5c:       c7 00 01 00 00 00       movl   $0x1,(%rax)
THIS IS THE OMP routine??  402c62:       eb 1b                   jmp    402c7f <main._omp_fn.1+0x146>
  402c64:       48 8b 05 a5 55 00 00    mov    0x55a5(%rip),%rax        # 408210 <_ekgActualThreadID>
  402c6b:       8b 55 d8                mov    -0x28(%rbp),%edx


End Heartbeat Macro: (55 instructions)
  402c64:       48 8b 05 a5 55 00 00    mov    0x55a5(%rip),%rax        # 408210 <_ekgActualThreadID>
  402c6b:       8b 55 d8                mov    -0x28(%rbp),%edx
  402c6e:       48 c1 e2 02             shl    $0x2,%rdx
  402c72:       48 01 c2                add    %rax,%rdx
  402c75:       8b 45 dc                mov    -0x24(%rbp),%eax
  402c78:       89 02                   mov    %eax,(%rdx)
  402c7a:       e9 79 ff ff ff          jmpq   402bf8 <main._omp_fn.1+0xbf>
  402c7f:       c7 45 e8 01 00 00 00    movl   $0x1,-0x18(%rbp)
  402c86:       90                      nop
  402c87:       8b 45 e4                mov    -0x1c(%rbp),%eax
  402c8a:       39 45 e8                cmp    %eax,-0x18(%rbp)
  402c8d:       0f 82 a7 00 00 00       jb     402d3a <main._omp_fn.1+0x201>
  402c93:       48 8b 05 7e 55 00 00    mov    0x557e(%rip),%rax        # 408218 <_ekgThreadId>
  402c9a:       ff d0                   callq  *%rax
  402c9c:       83 c0 01                add    $0x1,%eax
  402c9f:       89 45 d4                mov    %eax,-0x2c(%rbp)
  402ca2:       8b 45 d4                mov    -0x2c(%rbp),%eax
  402ca5:       89 c2                   mov    %eax,%edx
  402ca7:       48 69 d2 dd 47 70 1f    imul   $0x1f7047dd,%rdx,%rdx
  402cae:       48 c1 ea 20             shr    $0x20,%rdx
  402cb2:       89 c1                   mov    %eax,%ecx
  402cb4:       29 d1                   sub    %edx,%ecx
  402cb6:       d1 e9                   shr    %ecx
  402cb8:       01 ca                   add    %ecx,%edx
  402cba:       c1 ea 05                shr    $0x5,%edx
  402cbd:       6b d2 39                imul   $0x39,%edx,%edx
  402cc0:       29 d0                   sub    %edx,%eax
  402cc2:       89 45 d0                mov    %eax,-0x30(%rbp)
  402cc5:       48 8b 05 44 55 00 00    mov    0x5544(%rip),%rax        # 408210 <_ekgActualThreadID>
  402ccc:       8b 55 d0                mov    -0x30(%rbp),%edx
  402ccf:       48 c1 e2 02             shl    $0x2,%rdx
  402cd3:       48 01 d0                add    %rdx,%rax
  402cd6:       8b 00                   mov    (%rax),%eax
  402cd8:       3b 45 d4                cmp    -0x2c(%rbp),%eax
  402cdb:       75 4b                   jne    402d28 <main._omp_fn.1+0x1ef>
  402cdd:       8b 55 d0                mov    -0x30(%rbp),%edx
  402ce0:       89 d0                   mov    %edx,%eax
  402ce2:       c1 e0 02                shl    $0x2,%eax
  402ce5:       01 d0                   add    %edx,%eax
  402ce7:       c1 e0 02                shl    $0x2,%eax
  402cea:       83 c0 01                add    $0x1,%eax
  402ced:       89 45 d0                mov    %eax,-0x30(%rbp)
  402cf0:       48 8b 05 09 55 00 00    mov    0x5509(%rip),%rax        # 408200 <_ekgHBEndFlag>
  402cf7:       8b 55 d0                mov    -0x30(%rbp),%edx
  402cfa:       48 c1 e2 02             shl    $0x2,%rdx
  402cfe:       48 01 d0                add    %rdx,%rax
  402d01:       8b 00                   mov    (%rax),%eax
  402d03:       85 c0                   test   %eax,%eax
  402d05:       74 21                   je     402d28 <main._omp_fn.1+0x1ef>
  402d07:       bf 02 00 00 00          mov    $0x2,%edi
  402d0c:       e8 f3 1c 00 00          callq  404a04 <ekgEndHeartbeat>
  402d11:       48 8b 05 e8 54 00 00    mov    0x54e8(%rip),%rax        # 408200 <_ekgHBEndFlag>
  402d18:       8b 55 d0                mov    -0x30(%rbp),%edx
  402d1b:       48 c1 e2 02             shl    $0x2,%rdx
  402d1f:       48 01 d0                add    %rdx,%rax
  402d22:       c7 00 00 00 00 00       movl   $0x0,(%rax)

