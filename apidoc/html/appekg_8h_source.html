<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AppEKG: appekg.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AppEKG
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">Heartbeat Instrumentation Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">appekg.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="appekg_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">// TODO: Should PBS/SLURM ids override initialization parameter?</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#ifndef __APPEKG_H__</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#define __APPEKG_H__</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//#include &lt;inttypes.h&gt;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#ifdef APPEKG_DISABLE</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//--------------------------------------------------------------------</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// Completely empy AppEKG macro definitions, for compiling AppEKG out</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">//--------------------------------------------------------------------</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#define EKG_BEGIN_HEARTBEAT(id, rateFactor)</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#define EKG_END_HEARTBEAT(id)</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#define EKG_PULSE_HEARTBEAT(id, rateFactor)</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#define EKG_INITIALIZE(numHeartbeats, samplingInterval, appid, jobid, rank,    \</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">                       silent)</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#define EKG_FINALIZE()</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#define EKG_DISABLE()</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#define EKG_ENABLE()</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#define EKG_NAME_HEARTBEAT(id, name)</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#define EKG_IDOF_HEARTBEAT(name)</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#define EKG_NAMEOF_HEARTBEAT(id)</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">// Operating Parameters</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#define EKG_MAX_THREADS 57</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#define EKG_MAX_HEARTBEATS 20</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">// comment out the below to use pthread functions for </span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">// determining thread IDs, uncomment to use OpenMP functions</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">//#define EKG_USE_OPENMP (now in Makefile, do not uncomment this)</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">// uncomment this to allow AppEKG to finalize and output any</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// heartbeats that were begun but never ended</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">//#define EKG_DO_UNFINISHED_HBS</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">// Thread ID note: we use a function pointer _ekgThreadId() that</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">// is set to reference either pthread_self() or omp_get_thread_num().</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">// In the macros, the thread id is &quot;+1&quot; because OpenMP threads IDs</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">// start at 0, and we use 0 as an indication of &quot;no thread&quot;.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">//--------------------------------------------------------------------</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">// API Macros</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// TODO: technically, the actual thread id check and set in the begin</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// macro does have a race condition, but we really don&#39;t want the</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">// overhead of a lock; the race would be only over those threads that</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">// actually collided in the hashing, and it is only a few instructions</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">// long. The first heartbeat might get screwed up but after that, things</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">// should be ok since a thread id is recorded at that point.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">//--------------------------------------------------------------------</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="appekg_8h.html#af07bd32a1af2d3b7c0be0d6b4eef9d46">  130</a></span>&#160;<span class="preprocessor">#define EKG_BEGIN_HEARTBEAT(id, rateFactor)                                    \</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">    do {                                                                       \</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">        unsigned int rid = _ekgThreadId()+1;                                   \</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">        unsigned int tid = rid % EKG_MAX_THREADS;                              \</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">        if (_ekgActualThreadID[tid] == 0) {                                    \</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">            if (0) fprintf(stderr,&quot;ekgBH: register thread %u %u\n&quot;,tid,rid);   \</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">            _ekgActualThreadID[tid] = rid; }                                   \</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">        else if (_ekgActualThreadID[tid] != rid) {                             \</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">            if (0) fprintf(stderr,&quot;ekgBH: skipping thread %u %u\n&quot;,tid,rid);   \</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">            break; }                                                           \</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">        if (0) fprintf(stderr,&quot;ekgBH: %u thread %u %u\n&quot;,(id),tid,rid);        \</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">        tid = tid * EKG_MAX_HEARTBEATS + (id)-1;                               \</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">        if ((_ekgHBCount[tid]++) % (rateFactor) == 0) {                        \</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">            ekgBeginHeartbeat((id));                                           \</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">            _ekgHBEndFlag[tid] = 1;                                            \</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">        }                                                                      \</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">    } while (0)</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="appekg_8h.html#a3be912c754e98df0a44eb2a45258925d">  153</a></span>&#160;<span class="preprocessor">#define EKG_END_HEARTBEAT(id)                                                  \</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">    do {                                                                       \</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">        unsigned int rid = _ekgThreadId()+1;                                   \</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">        unsigned int tid = rid % EKG_MAX_THREADS;                              \</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">        if (_ekgActualThreadID[tid] != rid) {                                  \</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">            if (0) fprintf(stderr,&quot;ekgEH: skipping thread %u %u\n&quot;,tid,rid);   \</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">            break; }                                                           \</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">        if (0) fprintf(stderr,&quot;ekgEH: %u thread %u %u\n&quot;,(id),tid,rid);        \</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">        tid = tid * EKG_MAX_HEARTBEATS + (id)-1;                               \</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">        if (_ekgHBEndFlag[tid]) {                                              \</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">            ekgEndHeartbeat((id));                                             \</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">            _ekgHBEndFlag[tid] = 0;                                            \</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">        }                                                                      \</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">    } while (0)</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="appekg_8h.html#a2c43f9d5eac7ae2c5a7359a8c7a2b37d">  174</a></span>&#160;<span class="preprocessor">#define EKG_PULSE_HEARTBEAT(id, rateFactor)                                    \</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">    do {                                                                       \</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">        unsigned int rid = _ekgThreadId()+1;                                   \</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">        unsigned int tid = rid % EKG_MAX_THREADS;                              \</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">        if (_ekgActualThreadID[tid] == 0)                                      \</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">            _ekgActualThreadID[tid] = rid;                                     \</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">        else if (_ekgActualThreadID[tid] != rid)                               \</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">            break;                                                             \</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">        tid = tid * EKG_MAX_HEARTBEATS + (id)-1;                               \</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">        if ((_ekgHBCount[tid]++) % (rateFactor) == 0) {                        \</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">            ekgBeginHeartbeat((id));                                           \</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">            ekgEndHeartbeat((id));                                             \</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">        }                                                                      \</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">    } while (0)</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="appekg_8h.html#a14f12a06f0b76baedcd282f5bbe05814">  200</a></span>&#160;<span class="preprocessor">#define EKG_INITIALIZE(numHeartbeats, samplingInterval, appid, jobid, rank,    \</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">                       silent)                                                 \</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">    do {                                                                       \</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="preprocessor">        ekgInitialize((numHeartbeats), (samplingInterval), (appid), (jobid),   \</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">                      (rank), (silent));                                       \</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">    } while (0)</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="appekg_8h.html#ae2324b82851b0829cd82558dd86ce714">  210</a></span>&#160;<span class="preprocessor">#define EKG_FINALIZE()                                                         \</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">    do {                                                                       \</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">        ekgFinalize();                                                         \</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">    } while (0)</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="appekg_8h.html#a580dcec3ff047566cd50312a3f5266d5">  218</a></span>&#160;<span class="preprocessor">#define EKG_DISABLE()                                                          \</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">    do {                                                                       \</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="preprocessor">        ekgDisable();                                                          \</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="preprocessor">    } while (0)</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="appekg_8h.html#a46071c2e205549c0c14d2344b43c378e">  226</a></span>&#160;<span class="preprocessor">#define EKG_ENABLE()                                                           \</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="preprocessor">    do {                                                                       \</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">        ekgEnable();                                                           \</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">    } while (0)</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="appekg_8h.html#a196f03a8a55bcb37f0989ec8107858a2">  237</a></span>&#160;<span class="preprocessor">#define EKG_NAME_HEARTBEAT(id, name)                                           \</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">    do {                                                                       \</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">        ekgNameHeartbeat((id), (name));                                        \</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="preprocessor">    } while (0)</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="appekg_8h.html#ae413b012a62c821453522a9c47f8e6ca">  247</a></span>&#160;<span class="preprocessor">#define EKG_IDOF_HEARTBEAT(name) ({ekgIdOfHeartbeat((name))})</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="appekg_8h.html#af7178a628e72f2b7161aca85aa366163">  255</a></span>&#160;<span class="preprocessor">#define EKG_NAMEOF_HEARTBEAT(id) ({ekgNameOfHeartbeat((id))})</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">//--------------------------------------------------------------------</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">// API functions</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">//--------------------------------------------------------------------</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="keywordtype">void</span> <a class="code" href="appekg_8h.html#a6998f207edfeb6dcd0c6647b1997cdee">ekgBeginHeartbeat</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="keywordtype">void</span> <a class="code" href="appekg_8h.html#a5ecf0b4241e11e9a7bb1c4f136e26c6d">ekgEndHeartbeat</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="keywordtype">void</span> ekgPulseHeartbeat(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="keywordtype">int</span> <a class="code" href="appekg_8h.html#affd2793a7783d47cf6fac091afc270eb">ekgInitialize</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numHeartbeats, <span class="keywordtype">float</span> samplingInterval,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> appid, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> jobid, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rank,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> silent);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="keywordtype">void</span> <a class="code" href="appekg_8h.html#a3d7e143b565e961e37aca9c9b697aa3a">ekgFinalize</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keywordtype">void</span> <a class="code" href="appekg_8h.html#a88245389dffcd6a94e6d82ae7ec2677a">ekgDisable</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="keywordtype">void</span> <a class="code" href="appekg_8h.html#a3ead583445b35a96efef8f1754e06bba">ekgEnable</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="keywordtype">int</span> <a class="code" href="appekg_8h.html#a4d7e05cc9e5a5f908bd10039b6f14674">ekgNameHeartbeat</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">char</span>* name);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="appekg_8h.html#ac81b5153ffd968137961d053b270d5b3">ekgIdOfHeartbeat</a>(<span class="keywordtype">char</span>* name);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="keywordtype">char</span>* <a class="code" href="appekg_8h.html#a331e073749d454bd660d5a4f2b4c0f3d">ekgNameOfHeartbeat</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">// Rate factor control data</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">// in-library sources needs to define EKG_EXTERN as empty</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor">#ifndef EKG_EXTERN</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">#define EKG_EXTERN extern</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;EKG_EXTERN <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* _ekgHBEndFlag;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;EKG_EXTERN <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* _ekgHBCount;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">// track the actual thread id that is hashed to this location, other</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">// threads that hash here will be ignored</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;EKG_EXTERN <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* _ekgActualThreadID;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;EKG_EXTERN <span class="keywordtype">unsigned</span> long (*_ekgThreadId)(void);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="preprocessor">#endif // APPEKG_DISABLE</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="preprocessor">#endif // ifdef APPEKG_H</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aappekg_8h_html_a4d7e05cc9e5a5f908bd10039b6f14674"><div class="ttname"><a href="appekg_8h.html#a4d7e05cc9e5a5f908bd10039b6f14674">ekgNameHeartbeat</a></div><div class="ttdeci">int ekgNameHeartbeat(unsigned int id, char *name)</div><div class="ttdoc">Provide a name for a heartbeat.</div><div class="ttdef"><b>Definition:</b> appekg.c:479</div></div>
<div class="ttc" id="aappekg_8h_html_a3d7e143b565e961e37aca9c9b697aa3a"><div class="ttname"><a href="appekg_8h.html#a3d7e143b565e961e37aca9c9b697aa3a">ekgFinalize</a></div><div class="ttdeci">void ekgFinalize(void)</div><div class="ttdoc">Finish AppEKG data collection, permanently.</div><div class="ttdef"><b>Definition:</b> appekg.c:321</div></div>
<div class="ttc" id="aappekg_8h_html_a5ecf0b4241e11e9a7bb1c4f136e26c6d"><div class="ttname"><a href="appekg_8h.html#a5ecf0b4241e11e9a7bb1c4f136e26c6d">ekgEndHeartbeat</a></div><div class="ttdeci">void ekgEndHeartbeat(unsigned int id)</div><div class="ttdoc">End a heartbeat.</div><div class="ttdef"><b>Definition:</b> appekg.c:413</div></div>
<div class="ttc" id="aappekg_8h_html_a3ead583445b35a96efef8f1754e06bba"><div class="ttname"><a href="appekg_8h.html#a3ead583445b35a96efef8f1754e06bba">ekgEnable</a></div><div class="ttdeci">void ekgEnable(void)</div><div class="ttdoc">Start or restart AppEKG data collection.</div><div class="ttdef"><b>Definition:</b> appekg.c:357</div></div>
<div class="ttc" id="aappekg_8h_html_affd2793a7783d47cf6fac091afc270eb"><div class="ttname"><a href="appekg_8h.html#affd2793a7783d47cf6fac091afc270eb">ekgInitialize</a></div><div class="ttdeci">int ekgInitialize(unsigned int numHeartbeats, float samplingInterval, unsigned int appid, unsigned int jobid, unsigned int rank, unsigned int silent)</div><div class="ttdoc">Initialize AppEKG for heartbeat collection.</div><div class="ttdef"><b>Definition:</b> appekg.c:159</div></div>
<div class="ttc" id="aappekg_8h_html_a331e073749d454bd660d5a4f2b4c0f3d"><div class="ttname"><a href="appekg_8h.html#a331e073749d454bd660d5a4f2b4c0f3d">ekgNameOfHeartbeat</a></div><div class="ttdeci">char * ekgNameOfHeartbeat(unsigned int id)</div><div class="ttdoc">Find name of heartbeat from ID.</div><div class="ttdef"><b>Definition:</b> appekg.c:519</div></div>
<div class="ttc" id="aappekg_8h_html_a88245389dffcd6a94e6d82ae7ec2677a"><div class="ttname"><a href="appekg_8h.html#a88245389dffcd6a94e6d82ae7ec2677a">ekgDisable</a></div><div class="ttdeci">void ekgDisable(void)</div><div class="ttdoc">Stop AppEKG data collection temporarily.</div><div class="ttdef"><b>Definition:</b> appekg.c:349</div></div>
<div class="ttc" id="aappekg_8h_html_a6998f207edfeb6dcd0c6647b1997cdee"><div class="ttname"><a href="appekg_8h.html#a6998f207edfeb6dcd0c6647b1997cdee">ekgBeginHeartbeat</a></div><div class="ttdeci">void ekgBeginHeartbeat(unsigned int id)</div><div class="ttdoc">Begin a heartbeat.</div><div class="ttdef"><b>Definition:</b> appekg.c:372</div></div>
<div class="ttc" id="aappekg_8h_html_ac81b5153ffd968137961d053b270d5b3"><div class="ttname"><a href="appekg_8h.html#ac81b5153ffd968137961d053b270d5b3">ekgIdOfHeartbeat</a></div><div class="ttdeci">unsigned int ekgIdOfHeartbeat(char *name)</div><div class="ttdoc">Find ID of heartbeat from name.</div><div class="ttdef"><b>Definition:</b> appekg.c:497</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 8 2025 11:03:48 for AppEKG by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
